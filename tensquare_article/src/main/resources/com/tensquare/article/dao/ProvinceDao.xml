<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.tensquare.article.dao.ProvinceDao">
    <select id="findAll" resultType="province">
        select
         province_id provinceId,
         province_name provinceName,
         province_short provinceShort,
         province_status provinceStatus,
         province_desc provinceDesc,
         province_date provinceDate
          from tb_province
    </select>
    <insert id="addProvince" parameterType="province">
        insert into tb_province (province_id,province_name,province_short,province_status,province_desc,province_date) values
                                 (#{provinceId},#{provinceName},#{provinceShort},#{provinceStatus},#{provinceDesc},#{provinceDate})
    </insert>
    <update id="update" parameterType="province">
        update tb_province
        <set>
            <if test="provinceName!=''and provinceName!=null">
                province_name=#{provinceName},
            </if>
            <if test="provinceShort!=''and provinceShort!=null">
                province_short=#{provinceShort},
            </if>
            <if test="provinceStatus!=''and provinceStatus!=null">
                province_status=#{provinceStatus},
            </if>
            <if test="provinceDesc!=''and provinceDesc!=null">
                province_desc=#{provinceDesc},
            </if>
            <if test="provinceDate!=''and provinceDate!=null">
                province_date=#{provinceDate},
            </if>
        </set>
        where province_id=#{provinceId}
    </update>
    <delete id="delectByIds" parameterType="list">
        delete from tb_province where province_id in
        <foreach collection="idList" open="(" item="item" separator="," close=")">
            #{item}
        </foreach>
    </delete>
    <select id="selectByNameAndCode" resultMap="provinceList">
        select * from tb_province where province_name=#{provinceName} and province_status=#{provinceCode}
    </select>
    <resultMap id="provinceList" type="java.util.Map">
        <id property="provinceId" column="province_id"/>
        <result property="provinceName" column="province_name"/>
        <result property="provinceShort" column="province_short"/>
        <result property="provinceStatus" column="province_status"/>
        <result property="provinceDesc" column="province_desc"/>
        <result property="provinceDate" column="province_date"/>
    </resultMap>
    <select id="selectAllProvince" resultMap="provinceWithCity">
        select * from tb_province p left join tb_city c on p.province_id=c.province_id
    </select>
    <resultMap id="provinceWithCity" type="province">
        <id property="provinceId" column="province_id"/>
        <result property="provinceName" column="province_name"/>
        <result property="provinceShort" column="province_short"/>
        <result property="provinceStatus" column="province_status"/>
        <result property="provinceDesc" column="province_desc"/>
        <result property="provinceDate" column="province_date"/>
        <collection property="cityList" ofType="city">
            <id property="cityId" column="city_id"/>
            <result property="provinceId" column="province_id" />
            <result property="cityName" column="city_name"/>
            <result property="cityShort" column="city_short"/>
            <result property="cityCode" column="city_code"/>
            <result property="cityDesc" column="city_desc"/>
            <result property="cityDate" column="city_date"/>
        </collection>
    </resultMap>
    <insert id="addProvince2" parameterType="map">
         insert into tb_province (province_id,province_name,province_short,province_status,province_desc,province_date) values
                                 (#{provinceId},#{provinceName},#{provinceShort},#{provinceStatus},#{provinceDesc},#{provinceDate})
    </insert>
    <delete id="deleteProvinceById" parameterType="string">
         delete from tb_province where province_id=#{provinceId}
    </delete>
</mapper>